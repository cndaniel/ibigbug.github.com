<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1">
    <title>SBlog Demo</title>
    <link rel="stylesheet" href="/static/sblog.css" media="all">
</head>
<body>
    <div class="flex-wrap yue">
        <div class="flex-item sidebar-left">
            <h1 class="site-name">
    <a href="http://127.0.0.1:8000">SBlog Demo</a>
</h1>
<div class="profile">
    <p>Hey! My name is  <em>Yuwei Ba</em>. My friends also call me <em>badi</em>. </p>
<p>I am a student from Wuhan University(aka WHU).You can find me on <a href="https://twitter.com/ibigbug">Twitter</a> or Email me <a href="mailto:i@xiaoba.me">i@xiaoba.me</a>.</p>
<p>I major in Electric Engineering and sometimes do some coding. All source can be found on <a href="https://github.com/ibigbug">Github</a>.</p>

</div>
<div class="about">
    <p><small>Powered by SBlog &amp; LOVE.</small></p>

</div>
        </div>
        <div class="flex-item main">
            
<h3>Run Custom Scripts on boot under Systemd</h3>
<div class="meta">Published on 2012-11-09 by ibigbug</div>

<p>As archlinux has replaced <em>initscripts</em> with <em>systemd</em> as default init system and <a href="https://www.archlinux.org/news/end-of-initscripts-support/">will start removing initscripts suppport</a>, I use systemd now.</p>
<p>To be different from <em>initscripts</em>, <em>rc scripts</em> are no longer available. However it's complicated to write a very  <em>.service</em> boot script for each program. So solusion like this may be useful:</p>
<ol>
<li><p>Create a systemd-service-script which start a normal script and run it on boot.</p>
</li>
<li><p>You can execute any command via the script mentioned in step 1.</p>
</li>
</ol>
<p>In fact we are emulating the <em>rc.local</em> script which only works under <em>initscripts</em>.</p>
<p>The demo may look like this:</p>
<h4>custom.service:</h4>
<div class="highlight"><pre><span class="p">[</span><span class="nx">Unit</span><span class="p">]</span>
<span class="nx">Description</span><span class="o">=</span><span class="nx">Custom</span> <span class="nx">startup</span><span class="o">-</span><span class="nx">scripts</span>

<span class="p">[</span><span class="nx">Service</span><span class="p">]</span>
<span class="nx">ExecStart</span><span class="o">=</span><span class="err">/usr/bin/systemd_scripts_on_boot</span>

<span class="p">[</span><span class="nx">Install</span><span class="p">]</span>
<span class="nx">WantedBy</span><span class="o">=</span><span class="nx">multi</span><span class="o">-</span><span class="nx">user</span><span class="p">.</span><span class="nx">target</span>
</pre></div>
<h4>systemd_scripts_on_boot:</h4>
<div class="highlight"><pre><span class="err">#</span><span class="o">!</span><span class="err">/bin/bash</span>

<span class="nx">EXECUTE</span> <span class="nx">YOUR</span> <span class="nx">CUSTOM</span> <span class="nx">SCRIPT</span> <span class="nx">YOU</span> <span class="nx">WANT</span> <span class="nx">TO</span> <span class="nx">RUN</span> <span class="nx">ON</span> <span class="nx">STARTUP</span>
</pre></div>
<p>I'm a newbie on linux, systemd and English. Please let me know if any bugs ^^</p>





<div class="disqus-area">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'heheblog';
        var disqus_title = 'Run Custom Scripts on boot under Systemd';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
</div>


        </div>
        <div class="flex-item sidebar-right">
            <div class="tags">
    <h2>Tags</h2>
    <ul>
        
        <li><a href="/tag.html#Python">Python</a></li>
        
        <li><a href="/tag.html#翻译">翻译</a></li>
        
    </ul>
</div>
        </div>
    </div>
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-20201958-3']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
</body>
</html>